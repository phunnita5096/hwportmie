<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Mushroom Kingdom 3D</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>

<!-- âœ… à¹‚à¸«à¸¥à¸” Three.js + Loader -->
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/EXRLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
<script>
  // âœ… à¸ªà¸£à¹‰à¸²à¸‡ Scene
  const scene = new THREE.Scene();

  // âœ… à¸à¸¥à¹‰à¸­à¸‡ (à¹ƒà¸à¸¥à¹‰à¸­à¸²à¸“à¸²à¸ˆà¸±à¸à¸£)
  const camera = new THREE.PerspectiveCamera(
    60, window.innerWidth / window.innerHeight, 0.1, 2000
  );
  camera.position.set(5, 4, 8); // ðŸ‘ˆ à¹ƒà¸à¸¥à¹‰à¸¡à¸²à¸ à¹€à¸«à¹‡à¸™à¸­à¸²à¸“à¸²à¸ˆà¸±à¸à¸£à¹€à¸•à¹‡à¸¡à¸•à¸²
  camera.lookAt(0, 3, 0);

  // âœ… Renderer
  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.toneMapping = THREE.ACESFilmicToneMapping;
  renderer.toneMappingExposure = 1.0;
  renderer.outputEncoding = THREE.sRGBEncoding;
  document.body.appendChild(renderer.domElement);

  // âœ… Controls
  const controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.dampingFactor = 0.05;
  controls.target.set(0, 3, 0);
  controls.update();

  // âœ… à¹à¸ªà¸‡
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
  scene.add(ambientLight);

  const dirLight = new THREE.DirectionalLight(0xffffff, 1.5);
  dirLight.position.set(20, 50, 20);
  dirLight.castShadow = true;
  scene.add(dirLight);
  
  // âœ… à¸¥à¸”à¸„à¸§à¸²à¸¡à¸ªà¸§à¹ˆà¸²à¸‡
ambientLight.intensity = 0.2;       // à¸¥à¸” Ambient
dirLight.intensity = 0.8;          // à¸¥à¸” Directional
renderer.toneMappingExposure = 0.5; // à¸¥à¸”à¸„à¸§à¸²à¸¡à¸ªà¸§à¹ˆà¸²à¸‡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”

  // âœ… à¹‚à¸«à¸¥à¸” Environment (EXR)
  const pmremGenerator = new THREE.PMREMGenerator(renderer);
  pmremGenerator.compileEquirectangularShader();

  const exrLoader = new THREE.EXRLoader();
  exrLoader.load("qwantani_night_puresky_1k.exr", (texture) => {
    const envMap = pmremGenerator.fromEquirectangular(texture).texture;
    scene.background = envMap;     
    scene.environment = envMap;    
    texture.dispose();
    pmremGenerator.dispose();
  });

  // âœ… à¹‚à¸«à¸¥à¸”à¹‚à¸¡à¹€à¸”à¸¥ Mushroom Kingdom (.glb)
  const gltfLoader = new THREE.GLTFLoader();
  gltfLoader.load(
    "mushroom_kingdom_-_super_mario_galaxy-2.glb",
    (gltf) => {
      const model = gltf.scene;
      model.scale.set(1, 1, 1);
      model.position.set(0, 0, 0);
      scene.add(model);
      console.log("âœ… Loaded Mushroom Kingdom");
    },
    (xhr) => {
      console.log(Math.round((xhr.loaded / xhr.total) * 100) + "% loaded");
    },
    (error) => {
      console.error("âŒ Error loading GLB:", error);
    }
  );

// âœ… à¹‚à¸«à¸¥à¸”à¹‚à¸¡à¹€à¸”à¸¥ name.glb à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸‚à¹‰à¸²à¹„à¸› (à¹„à¸Ÿà¸¥à¹Œà¸‚à¸­à¸‡à¸„à¸¸à¸“)
const loader2 = new THREE.GLTFLoader();
loader2.load(
  "name.glb",
  (gltf) => {
    const nameModel = gltf.scene;

    // à¸‚à¸™à¸²à¸” / à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡
    nameModel.scale.set(1, 1, 1);
    nameModel.position.set(-1, 4, 0); // à¸Šà¸´à¸”à¸‹à¹‰à¸²à¸¢ + à¸ªà¸¹à¸‡

    // à¸•à¸±à¹‰à¸‡à¸•à¸£à¸‡: à¸«à¸¡à¸¸à¸™à¹à¸à¸™ X 90Â° (à¸–à¹‰à¸²à¹‚à¸¡à¹€à¸”à¸¥à¸™à¸­à¸™à¸£à¸²à¸š)
    nameModel.rotation.x = Math.PI / 2; // -90Â° à¸—à¸³à¹ƒà¸«à¹‰à¹‚à¸¡à¹€à¸”à¸¥à¸•à¸±à¹‰à¸‡à¸‚à¸¶à¹‰à¸™
    nameModel.rotation.y = 0;
    nameModel.rotation.z = 0;

    scene.add(nameModel);
    console.log("âœ… Loaded name.glb (à¸•à¸±à¹‰à¸‡à¸•à¸£à¸‡ + à¸Šà¸´à¸”à¸‹à¹‰à¸²à¸¢ + à¸¢à¸à¸ªà¸¹à¸‡)");
  },
  (xhr) => {
    console.log(Math.round((xhr.loaded / xhr.total) * 100) + "% loaded (name.glb)");
  },
  (error) => {
    console.error("âŒ Error loading name.glb:", error);
  }
);


  // âœ… Render loop
  function render() {
    requestAnimationFrame(render);
    controls.update();
    renderer.render(scene, camera);
  }
  render();

  // âœ… Resize
  window.addEventListener("resize", () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
</script>

</body>
</html>
